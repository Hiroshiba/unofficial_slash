dataset:
  train:
    audio_pathlist_path: "tests/data/test_data/train_audio_pathlist.txt"
    pitch_label_pathlist_path: null
    length_file_path: "train_lengths.txt"
    batch_bins: 1000
    root_dir: "tests/data/test_data"
  valid:
    audio_pathlist_path: "tests/data/test_data/valid_audio_pathlist.txt"
    pitch_label_pathlist_path: "tests/data/test_data/valid_pitch_pathlist.txt"
    length_file_path: "valid_lengths.txt"
    batch_bins: 1000
    root_dir: "tests/data/test_data"
  test_num: 16 # NOTE: 論文では0
  eval_times_num: 1
  seed: 42
  sample_rate: 24000

  # ピッチシフト
  pitch_shift_range: 14

network:
  sample_rate: 24000
  frame_length: 120
  valid_pitch_frame_length: 120 # NOTE: 論文では480

  # Pitch Encoder
  f0_bins: 64 # NOTE: テスト用に縮小、論文では1024
  bap_bins: 8
  nansy_conv_channels: 4 # NOTE: テスト用に縮小、論文で不明記、128くらい？
  nansy_num_resblocks: 1 # NOTE: テスト用に縮小、論文では2
  nansy_resblock_kernel_size: 3
  nansy_gru_hidden_size: 5 # NOTE: テスト用に縮小、論文で不明記、256くらい？
  nansy_gru_bidirectional: true # NOTE: 論文で不明記

  # CQT
  cqt_bins: 49 # NOTE: テスト用に縮小、論文では176
  cqt_total_bins: 205
  cqt_bins_per_octave: 24
  cqt_fmin: 32.70
  cqt_filter_scale: 0.5

  # Pitch Guide Generator
  pitch_guide_window_size: 50 # NOTE: 論文で不明記
  pitch_guide_shs_n_max: 10 # NOTE: 論文で不明記
  pitch_guide_f_min: 20.0
  pitch_guide_f_max: 2000.0
  pitch_guide_n_fft: 1024

  # Pseudo Spectrogram Generator
  pseudo_spec_epsilon: 0.001
  pseudo_spec_n_fft: 1024

  # V/UV Detector
  vuv_detector_eps: 1e-8
  vuv_threshold: 0.5

model:
  # 基本損失重み
  w_cons: 10.0
  w_guide: 1.0
  w_g_shift: 1.0
  w_pseudo: 10.0
  w_recon: 5.0

  # ノイズロバスト損失重み
  w_aug: 1.0
  w_g_aug: 1.0
  w_ap: 1.0

  # 損失パラメータ
  hinge_margin: 0.5
  ged_alpha: 0.1
  epsilon: 0.001
  huber_delta: 1.0

  # F0境界値
  f0_min: 20.0
  f0_max: 2000.0

  # BAP値域設定
  bap_min: -6.907755 # -60dB相当
  bap_max: 2.302585 # 20dB相当

  # ノイズロバスト化
  noise_snr_db_min: -6.0
  noise_snr_db_max: 20.0
  volume_change_db_range: 6.0

train:
  batch_size: 5 # NOTE: SLASH論文では17
  eval_batch_size: 5

  log_epoch: 1
  eval_epoch: 2
  snapshot_epoch: 3
  stop_epoch: 4
  model_save_num: 2
  optimizer:
    name: "adamw"
    lr: 0.0002
  scheduler: { "name": "warmup", "warmup_steps": 10 }
  prefetch_workers: 256
  preprocess_workers: 0
  use_gpu: false
  use_amp: false

project:
  name: "slash_test"
  category: "speech-processing"
